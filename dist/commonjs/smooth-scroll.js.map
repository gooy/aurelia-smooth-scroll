{"version":3,"sources":["smooth-scroll.js"],"names":[],"mappings":"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","file":"smooth-scroll.js","sourceRoot":"/source/","sourcesContent":["import {bindable,noView,customAttribute,Animator} from 'aurelia-framework';\nimport {Router} from 'aurelia-router';\n\n@customAttribute(\"smooth-scroll\")\n@noView\nexport class SmoothScroll{\n\n  @bindable duration;\n  @bindable easing;\n\n  subs = [];\n\n  static defaultConfig = {\n    duration: 400,\n    easing: \"ease-in\"\n  };\n\n  static inject = [Element,Animator,Router];\n  constructor(element,animator,router) {\n    this.element = element;\n    this.animator = animator;\n\n    var config = SmoothScroll.defaultConfig;\n    if(config.duration) this.duration = config.duration;\n    if(config.easing) this.easing = config.easing;\n  }\n\n  attached(){\n    var sub = this.onClick.bind(this);\n    this.subs.push();\n    this.element.addEventListener(\"click\",sub);\n  }\n\n  detached(){\n    if(this.subs) for(let sub of this.subs) sub();\n  }\n\n  onClick(event){\n    event.preventDefault();\n    this.scrollTo(this.element.getAttribute(\"href\"),{},document.body);\n    return false;\n  }\n\n  /**\n   * Scroll to an element or named anchor\n   *\n   * @param elementOrHash   element to scroll to or named anchor\n   * @param options         animator options\n   * @param container       the container element (defaults to document.body)\n   *\n   * @returns {Promise} resolved when scrolling is done\n   */\n  scrollTo(elementOrHash,options={},container=document.body){\n\n    var target = elementOrHash;\n    var hash = null;\n    //find target by id or name\n    if(typeof elementOrHash === \"string\" && elementOrHash.indexOf(\"#\")===0){\n      hash = elementOrHash.slice(1,elementOrHash.length);\n      if(hash){\n        target = container.querySelector(`[id=\"${hash}\"]`);\n        if(!target) container.querySelector(`[name=\"${hash}\"]`);\n      }else{\n        target = document.body;\n      }\n\n      if(history){\n        history.pushState(null, null, '#'+hash);\n      }else{\n        //fallback to location.hash\n        var t = container.scrollTop;\n        location.hash = hash;\n        container.scrollTop = t;\n      }\n\n    }\n\n    if(!target || typeof target === \"string\") return Promise.resolve();\n    return this.animator.animate(target,\"scroll\",\n      Object.assign({\n        duration: this.duration,\n        offset:SmoothScroll.getOffset(),\n        easing:this.easing\n      },options)\n    );\n\n  }\n\n  static getOffset(){\n    return - document.querySelector(\".page-host\").offsetTop;\n  }\n\n}\n"]}